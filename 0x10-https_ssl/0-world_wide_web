#!/usr/bin/env bash

# word wide web

domain="$1"

if [ -z "$domain" ]; then
    echo "Usage: $0 <domain> [subdomain]"
    exit 1
fi

sub_do=('www' 'lb-01' 'web-01' 'web-02')

Digger() {
    local subdomain="$1"
    dig "$subdomain.$domain" +short | awk -v s="$subdomain" '{print "The subdomain " s " is a " $2 " record and points to " $1}'
}

if [ $# -eq 1 ]; then
    for sub in "${sub_do[@]}"; do
        Digger "$sub"
    done
elif [ $# -eq 2 ]; then
    sub="$2"
    Digger "$sub"
fi
