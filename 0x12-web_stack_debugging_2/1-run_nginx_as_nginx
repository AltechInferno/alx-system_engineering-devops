#!/usr/bin/env bash

# Fixing container to meet requirements

# Change the user to nginx in the nginx.conf file
sed -i 's/#user www-data/user nginx;/' /etc/nginx/nginx.conf

# Change the listening port to 8080 in the default site configuration
sed -i 's/listen 80;/listen 8080;/' /etc/nginx/sites-available/default

# Ensure correct permissions for nginx.conf
chmod 644 /etc/nginx/nginx.conf

# Stop Apache2 if it's running (it's not needed if using Nginx)
pkill apache2

# Start Nginx as the nginx user
sudo -u nginx service nginx start

